\chapter{Simulation Code snippets}
\label{app:simulation}

\section{Simulation interface for Ethernet driver module}
\label{app:simulation_edrv}

\subsection{Implementation of simulation specific module}
\label{app:simulation_edrv_target}
\lstinputlisting[caption=edrv-sim.c,firstnumber=114,firstline=114,lastline=130]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/stack/src/kernel/edrv/edrv-sim.c}

\subsection{Definitions of simulation interface types}
\label{app:simulation_edrv_functions}
\lstinputlisting[caption=sim.h,firstnumber=84,firstline=84,lastline=189]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/include/sim.h}

\subsection{Instance information}
\label{app:simulation_edrv_interface_instance}
\lstinputlisting[caption=sim-edrv.c,firstnumber=48,firstline=48,lastline=64]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/src/sim-edrv.c}


\subsection{Definition and Implementation of setEdrvFunctions}
\label{app:simulation_edrv_interface_setfunc}
\lstinputlisting[caption=sim-edrv.h,firstnumber=39,firstline=39,lastline=40]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/include/sim-edrv.h}
\lstinputlisting[caption=sim-edrv.c,firstnumber=74,firstline=74,lastline=110]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/src/sim-edrv.c}


\subsection{Definition and Implementation of sendTxBuffer}
\label{app:simulation_edrv_interface_sendtx}
\lstinputlisting[caption=sim-edrv.h,firstnumber=46,firstline=46,lastline=46]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/include/sim-edrv.h}
\lstinputlisting[caption=sim-edrv.c,firstnumber=151,firstline=151,lastline=170]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/src/sim-edrv.c}

\section{Stack interface for Ethernet driver module}
\label{app:simulation_stackif}

\subsection{SharedLibraryHelper}
\label{app:simulation_stackif_libhelper}
\lstinputlisting[caption=SharedLibraryHelper.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/util/SharedLibraryHelper.h}
\lstinputlisting[caption=SharedLibraryHelper.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/util/SharedLibraryHelper.cc}

\subsection{OplkBase class}
\label{app:simulation_stackif_oplkbase}
\lstinputlisting[caption=OplkBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/interface/OplkBase.h}

\subsection{OplkEdrv}
\label{app:simulation_stackif_oplkedrv}
\lstinputlisting[caption=OplkEdrv.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/interface/OplkEdrv.h}
\lstinputlisting[caption=OplkEdrv.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/interface/OplkEdrv.cc}

\section{OMNeT++ modules}
\label{app:simulation_sim}

\subsection{DirectEdrv}
\label{app:simulation_sim_edrv}
\lstinputlisting[caption=DirectEdrv.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/DirectEdrv.h}
\lstinputlisting[caption=DirectEdrv.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/DirectEdrv.cc}

\subsection{GenericNode}
\label{app:simulation_sim_generic}
\lstinputlisting[caption=GenericNode.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/GenericNode.ned}

\subsection{Moduleinterfaces}
\label{app:simulation_sim_moduleinferfaces}
\lstinputlisting[caption=IDemo.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/IDemo.ned}
\lstinputlisting[caption=IEvent.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/IEvent.ned}
\lstinputlisting[caption=IApp.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/IApp.ned}

\subsection{Base classes}
\label{app:simulation_sim_baseclasses}
\lstinputlisting[caption=DemoBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/DemoBase.h}
\lstinputlisting[caption=DemoBase.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/DemoBase.cc}
\lstinputlisting[caption=EventBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/EventBase.h}
\lstinputlisting[caption=EventBase.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/EventBase.cc}
\lstinputlisting[caption=AppBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/AppBase.h}
\lstinputlisting[caption=AppBase.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/AppBase.cc}