\chapter{Simulation Code snippets}
\label{app:simulation}

\section{Simulation interface for Ethernet driver module}
\label{app:simulation_edrv}

\subsection{Implementation of simulation specific module}
\label{app:simulation_edrv_target}
\lstinputlisting[caption=edrv-sim.c,firstnumber=137,firstline=137,lastline=153]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/stack/src/kernel/edrv/edrv-sim.c}

\subsection{Definitions of Types regarding the simulation interface}
\label{app:simulation_edrv_functions}
\lstinputlisting[caption=sim.h,firstnumber=107,firstline=107,lastline=213]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/include/sim.h}

\subsection{Instance information}
\label{app:simulation_edrv_interface_instance}
\lstinputlisting[caption=sim-edrv.c,firstnumber=71,firstline=71,lastline=87]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/src/sim-edrv.c}


\subsection{Definition and Implementation of setEdrvFunctions}
\label{app:simulation_edrv_interface_setfunc}
\lstinputlisting[caption=sim-edrv.h,firstnumber=62,firstline=62,lastline=63]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/include/sim-edrv.h}
\lstinputlisting[caption=sim-edrv.c,firstnumber=97,firstline=97,lastline=133]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/src/sim-edrv.c}


\subsection{Definition and Implementation of sendTxBuffer}
\label{app:simulation_edrv_interface_sendtx}
\lstinputlisting[caption=sim-edrv.h,firstnumber=62,firstline=62,lastline=63]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/include/sim-edrv.h}
\lstinputlisting[caption=sim-edrv.c,firstnumber=174,firstline=174,lastline=193]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK_V2/sim/src/sim-edrv.c}

\section{Stack interface for Ethernet driver module}
\label{app:simulation_stackif}

\subsection{SharedLibraryHelper}
\label{app:simulation_stackif_libhelper}
\lstinputlisting{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/util/SharedLibraryHelper.h}
\lstinputlisting[caption=SharedLibraryHelper.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/util/SharedLibraryHelper.cc}

\subsection{OplkBase class}
\label{app:simulation_stackif_oplkbase}
\lstinputlisting[caption=OplkBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/interface/OplkBase.h}

\subsection{OplkEdrv}
\label{app:simulation_stackif_oplkedrv}
\lstinputlisting[caption=OplkEdrv.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/interface/OplkEdrv.h}
\lstinputlisting[caption=OplkEdrv.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/interface/OplkEdrv.cc}

\section{OMNeT++ modules}
\label{app:simulation_sim}

\subsection{Edrv}
\label{app:simulation_sim_edrv}
\lstinputlisting[caption=DirectEdrv.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/DirectEdrv.h}
\lstinputlisting[caption=DirectEdrv.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/stack/DirectEdrv.cc}

\subsection{GenericNode}
\label{app:simulation_sim_generic}
\lstinputlisting[caption=GenericNode.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/GenericNode.ned}

\subsection{Moduleinterfaces}
\label{app:simulation_sim_moduleinferfaces}
\lstinputlisting[caption=IDemo.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/IDemo.ned}
\lstinputlisting[caption=IEvent.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/IEvent.ned}
\lstinputlisting[caption=IApp.ned]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/IApp.ned}

\subsection{Base classes}
\label{app:simulation_sim_baseclasses}
\lstinputlisting[caption=DemoBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/DemoBase.h}
\lstinputlisting[caption=DemoBase.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/DemoBase.cc}
\lstinputlisting[caption=EventBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/EventBase.h}
\lstinputlisting[caption=EventBase.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/EventBase.cc}
\lstinputlisting[caption=AppBase.h]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/AppBase.h}
\lstinputlisting[caption=AppBase.cc]{../../src/simulations/openPOWERLINK_omnetpp/openPOWERLINK/src/generic/AppBase.cc}